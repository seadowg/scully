<html>
	<head>
		<title>Skully</title>
    <link href="master.css" rel="stylesheet" type="text/css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        function setupTextChange() {
          $('#episode_input').one('keydown', function() {
            displayNextEpisode("");
          });
        }
        
        function fetchNextEpisode() {
          $.ajax({
            type: "GET",
            url: "/episodes/search",
            dataType: "json",
            data: $('#episode_input').serialize(),
            success: function(data) {
              setupTextChange();
              displayNextEpisode(data['episode']);
            }
          });
        }
        
        function displayNextEpisode(episode) {
          $("#next_episode").text(episode);
        }
        
        $('#episode_form').submit(function(ev, data) {
          ev.preventDefault();
          fetchNextEpisode();
        });
        
        $('#episode_input').focus();
      });
    </script>
	</head>
	<body>
		The truth is out there...
    <br>
    <br>
		<form id="episode_form">
			C:\>  <input type="text" name="name" id="episode_input" class="episode_input" autocomplete="off">
		</form>
    <span id="next_episode"></span>
	</body>
</html>
